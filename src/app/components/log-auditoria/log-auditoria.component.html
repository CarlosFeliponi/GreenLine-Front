<br />
<div class="container">
  <div class="row">
    <div class="card">
      <div class="table-col card-body">
        <h3>Log de Auditoria</h3>
        <br /><br />

        <form action="/url" method="post" class="border border-1 p-4">
          <!--ajustar action(aparenta ser a url que ser enviado os dado, verificar se é necessario), method deve ser o metodo http de envio de dados, get, etc -->

          <!-- Search --><!-- revisar -->
          <div class="d-flex justify-content-center">
            <div class="input-group rounded w-50">
              <input
                type="search"
                class="form-control rounded"
                placeholder="Produto    |   Email"
                aria-label="Search"
                aria-describedby="search-addon"
              />
              <span class="input-group-text border-0" id="search-addon">
                <i class="fas fa-search"></i>
              </span>
            </div>
          </div>

          <div class="d-flex align-items-center justify-content-evenly mt-4">
            <!-- margin provisoria-->

            <div>
              <!-- Role -->
              <div class="form-check">
                <input
                  mdbRadio
                  class="form-check-input"
                  type="radio"
                  name="radioRoleTodos"
                  id="radioRoleTodos"
                  [checked]="true"
                  [(ngModel)]="params.roleUsuario"
                  [value]="undefined"
                  (change)="findLogsByCriterio()"
                />
                <label class="form-check-label" for="radioRoleTodos">
                  TODOS
                </label>
              </div>
              <div class="form-check">
                <input
                  mdbRadio
                  class="form-check-input"
                  type="radio"
                  name="radioRoleAdmin"
                  id="radioRoleAdmin"
                  [(ngModel)]="params.roleUsuario"
                  [value]="'ADMIN'"
                  (change)="findLogsByCriterio()"
                />
                <label class="form-check-label" for="radioRoleAdmin">
                  ADMIN
                </label>
              </div>
              <div class="form-check">
                <input
                  mdbRadio
                  class="form-check-input"
                  type="radio"
                  name="radioRoleUser"
                  id="radioRoleUser"
                  [(ngModel)]="params.roleUsuario"
                  [value]="'USER'"
                  (change)="findLogsByCriterio()"
                />
                <label class="form-check-label" for="radioRoleUser">
                  USUARIO
                </label>
              </div>
            </div>

            <!-- Calendario -->
            <div>
              <mat-form-field subscriptSizing="dynamic">
                <mat-label>Data</mat-label>
                <mat-date-range-input [rangePicker]="picker">
                  <input matStartDate placeholder="Data de inicio" />
                  <input matEndDate placeholder="Data de termino" />
                </mat-date-range-input>
                <!-- <mat-hint>DD/MM/YYYY – DD/MM/YYYY</mat-hint> -->
                <mat-datepicker-toggle
                  matIconSuffix
                  [for]="picker"
                ></mat-datepicker-toggle>
                <mat-date-range-picker #picker></mat-date-range-picker>
              </mat-form-field>
            </div>

            <!-- Operação -->
            <div>
              <mat-form-field subscriptSizing="dynamic">
                <mat-label>Operação</mat-label>
                <mat-select [(value)]="selected">
                  <!-- <mat-option>Todas</mat-option> -->
                  <mat-option value="option1">Cadastro</mat-option>
                  <mat-option value="option2">Exclução</mat-option>
                  <mat-option value="option3">Atualização</mat-option>
                  <mat-option value="option4">Login e logout</mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <!-- Entidade -->
            <div>
              <mat-form-field subscriptSizing="dynamic">
                <mat-label>Entidade</mat-label>
                <mat-select [(value)]="selected">
                  <!-- <mat-option>Todas</mat-option> -->
                  <mat-option value="option1">Produto</mat-option>
                  <mat-option value="option2">Venda</mat-option>
                  <mat-option value="option3">Usuario</mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <!-- Ordem -->
            <div>
              <!-- <mat-form-field>
                <mat-label>Ordem</mat-label>
                <mat-select>
                  @for (orden of ordens; track orden) {
                    <mat-option [value]="orden.value">{{orden.viewValue}}</mat-option>
                  }
                </mat-select>
              </mat-form-field> -->
              <mat-form-field subscriptSizing="dynamic">
                <mat-label>Ordem</mat-label>
                <mat-select [(value)]="ordem" (valueChange)="sortLog()">
                  <mat-option [value]="true">Crescente</mat-option>
                  <mat-option [value]="false">Decrescente</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </form>

        <br /><br /><br />

        <table border="1" class="table table-striped">
          <thead>
            <tr>
              <th>Data hora</th>
              <th>Role</th>
              <th>Email</th>
              <th>Operação</th>
              <th>Entidade</th>
              <th>Produto</th>
              <th>Detalhes</th>
            </tr>
          </thead>
          <tbody>
            @for (item of logAuditoria; track $index) {
            <tr>
              <td>{{ item.timestamp }}</td>
              <td>'ADMINtest-front'</td>
              <!-- <td>{{ item.role }}</td> -->
              @if(item.emailUsuario){
              <td>{{ item.emailUsuario }}</td>
              } @else {
              <td>---</td>
              }
              <td>{{ item.acao }}</td>
              <td>{{ item.entity }}</td>
              <td>"TV 32p. test-fron"</td>
              <!-- @if(item.produto){
              <td>{{ item.produto }}</td>
              } @else {
              <td>---</td> } -->
              @if(item.detalhes){
              <td>{{ item.detalhes }}</td>
              } @else {
              <td>---</td>
              }
            </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
